  [1m[36m (14.0ms)[0m  [1mCREATE TABLE "tickets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "submitter_id" integer, "assigned_id" integer, "title" varchar(255), "description" text, "created_at" datetime, "updated_at" datetime, "status" integer(255) DEFAULT 0 NOT NULL) [0m
  [1m[35m (13.5ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar(255), "role" integer(255) DEFAULT 0 NOT NULL, "created_at" datetime, "updated_at" datetime, "current_ticket_id" integer) 
  [1m[36m (19.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (0.3ms)[0m  select sqlite_version(*)
  [1m[36m (30.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (37.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150104043329')[0m
  [1m[35m (39.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150104015143')
  [1m[36m (38.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20141226165247')[0m
  [1m[35m (36.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150101222203')
  [1m[36m (30.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20141226171049')[0m
  [1m[35m (27.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150104024453')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:23.971880"], ["role", 3], ["updated_at", "2015-01-04 05:00:23.971880"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:23.973562"], ["role", 1], ["updated_at", "2015-01-04 05:00:23.973562"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 05:00:23.988189"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:23.988189"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:00:23.990030"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:23.997142"], ["role", 3], ["updated_at", "2015-01-04 05:00:23.997142"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:23.998333"], ["role", 1], ["updated_at", "2015-01-04 05:00:23.998333"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 05:00:24.001441"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.001441"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:00:24.002749"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.007420"], ["role", 4], ["updated_at", "2015-01-04 05:00:24.007420"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.008595"], ["role", 1], ["updated_at", "2015-01-04 05:00:24.008595"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.011695"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.011695"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.015004"], ["role", 4], ["updated_at", "2015-01-04 05:00:24.015004"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.016071"], ["role", 1], ["updated_at", "2015-01-04 05:00:24.016071"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.017036"], ["role", 2], ["updated_at", "2015-01-04 05:00:24.017036"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 05:00:24.020013"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.020013"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:00:24.021248"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.025729"], ["role", 3], ["updated_at", "2015-01-04 05:00:24.025729"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.027373"], ["role", 1], ["updated_at", "2015-01-04 05:00:24.027373"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 05:00:24.030614"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.030614"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:00:24.031874"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 05:00:24.034900"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.041533"], ["role", 3], ["updated_at", "2015-01-04 05:00:24.041533"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.042686"], ["role", 1], ["updated_at", "2015-01-04 05:00:24.042686"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 05:00:24.045720"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.045720"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:00:24.047011"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 05:00:24.049971"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 05:00:24.056222"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.060519"], ["role", 3], ["updated_at", "2015-01-04 05:00:24.060519"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.061637"], ["role", 1], ["updated_at", "2015-01-04 05:00:24.061637"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 05:00:24.064743"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.064743"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:00:24.066002"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.069300"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.069300"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 05:00:24.072367"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 05:00:24.074105"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 05:00:24.075243"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.078882"], ["role", 3], ["updated_at", "2015-01-04 05:00:24.078882"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.079989"], ["role", 4], ["updated_at", "2015-01-04 05:00:24.079989"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.080843"], ["role", 1], ["updated_at", "2015-01-04 05:00:24.080843"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 05:00:24.083807"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.083807"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:00:24.085464"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.089666"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 05:00:24.089666"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 05:00:24.093003"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 05:00:24.094678"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:00:24.097994"], ["role", 4], ["updated_at", "2015-01-04 05:00:24.097994"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:00:24.099120"], ["role", 1], ["updated_at", "2015-01-04 05:00:24.099120"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.798766"], ["role", 3], ["updated_at", "2015-01-04 05:17:21.798766"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.801785"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.801785"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 05:17:21.816453"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.816453"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:17:21.818328"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.825382"], ["role", 3], ["updated_at", "2015-01-04 05:17:21.825382"], ["username", "villianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.826536"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.826536"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 05:17:21.829621"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.829621"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:17:21.830936"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.835652"], ["role", 4], ["updated_at", "2015-01-04 05:17:21.835652"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.836815"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.836815"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.839959"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.839959"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.843302"], ["role", 4], ["updated_at", "2015-01-04 05:17:21.843302"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.844344"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.844344"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.845325"], ["role", 2], ["updated_at", "2015-01-04 05:17:21.845325"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 05:17:21.848229"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.848229"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:17:21.849460"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.854514"], ["role", 3], ["updated_at", "2015-01-04 05:17:21.854514"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.856142"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.856142"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 05:17:21.859393"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.859393"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:17:21.860669"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 05:17:21.863664"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.870317"], ["role", 3], ["updated_at", "2015-01-04 05:17:21.870317"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.871433"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.871433"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 05:17:21.874522"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.874522"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:17:21.875772"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 05:17:21.878693"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 05:17:21.885386"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.889712"], ["role", 3], ["updated_at", "2015-01-04 05:17:21.889712"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.890947"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.890947"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 05:17:21.894033"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.894033"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:17:21.895342"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.898760"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.898760"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 05:17:21.901905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 05:17:21.903637"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 05:17:21.904760"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.908454"], ["role", 3], ["updated_at", "2015-01-04 05:17:21.908454"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.909484"], ["role", 4], ["updated_at", "2015-01-04 05:17:21.909484"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.910439"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.910439"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 05:17:21.913603"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.913603"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 05:17:21.915310"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.919613"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 05:17:21.919613"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 05:17:21.922866"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 05:17:21.924535"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 05:17:21.927912"], ["role", 4], ["updated_at", "2015-01-04 05:17:21.927912"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 05:17:21.928947"], ["role", 1], ["updated_at", "2015-01-04 05:17:21.928947"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.610173"], ["role", 3], ["updated_at", "2015-01-04 20:43:34.610173"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.613657"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.613657"], ["username", "juniorSupportTech"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:43:34.628758"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.628758"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:43:34.630877"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.638110"], ["role", 3], ["updated_at", "2015-01-04 20:43:34.638110"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.639202"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.639202"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:43:34.642360"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.642360"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:43:34.643672"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.648899"], ["role", 4], ["updated_at", "2015-01-04 20:43:34.648899"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.650154"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.650154"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.653296"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.653296"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.656714"], ["role", 4], ["updated_at", "2015-01-04 20:43:34.656714"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.657752"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.657752"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.658745"], ["role", 2], ["updated_at", "2015-01-04 20:43:34.658745"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:43:34.661668"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.661668"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:43:34.663000"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.668195"], ["role", 3], ["updated_at", "2015-01-04 20:43:34.668195"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.669357"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.669357"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:43:34.672441"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.672441"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:43:34.673703"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:43:34.676712"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.683458"], ["role", 3], ["updated_at", "2015-01-04 20:43:34.683458"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.684584"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.684584"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:43:34.688266"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.688266"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:43:34.689574"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:43:34.692610"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:43:34.699407"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.703031"], ["role", 3], ["updated_at", "2015-01-04 20:43:34.703031"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.704182"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.704182"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:43:34.707549"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.707549"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:43:34.709321"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.713013"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.713013"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:43:34.716446"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:43:34.718314"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:43:34.719619"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.723499"], ["role", 3], ["updated_at", "2015-01-04 20:43:34.723499"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.724525"], ["role", 4], ["updated_at", "2015-01-04 20:43:34.724525"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.725725"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.725725"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:43:34.729979"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.729979"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:43:34.731596"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.734958"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:43:34.734958"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:43:34.738252"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:43:34.739906"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:43:34.743214"], ["role", 4], ["updated_at", "2015-01-04 20:43:34.743214"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:43:34.744286"], ["role", 1], ["updated_at", "2015-01-04 20:43:34.744286"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.209594"], ["role", 3], ["updated_at", "2015-01-04 20:44:41.209594"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.212969"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.212969"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 11ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.229140"], ["role", 3], ["updated_at", "2015-01-04 20:44:41.229140"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.230285"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.230285"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.235224"], ["role", 4], ["updated_at", "2015-01-04 20:44:41.235224"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.236367"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.236367"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.241021"], ["role", 4], ["updated_at", "2015-01-04 20:44:41.241021"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.242302"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.242302"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.243379"], ["role", 2], ["updated_at", "2015-01-04 20:44:41.243379"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.247879"], ["role", 3], ["updated_at", "2015-01-04 20:44:41.247879"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.248943"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.248943"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.253362"], ["role", 3], ["updated_at", "2015-01-04 20:44:41.253362"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.254403"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.254403"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.260166"], ["role", 3], ["updated_at", "2015-01-04 20:44:41.260166"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.261482"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.261482"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.266213"], ["role", 3], ["updated_at", "2015-01-04 20:44:41.266213"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.267254"], ["role", 4], ["updated_at", "2015-01-04 20:44:41.267254"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.268201"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.268201"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:44:41.273562"], ["role", 4], ["updated_at", "2015-01-04 20:44:41.273562"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:44:41.274735"], ["role", 1], ["updated_at", "2015-01-04 20:44:41.274735"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.073398"], ["role", 3], ["updated_at", "2015-01-04 20:45:03.073398"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.077643"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.077643"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 11ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.094104"], ["role", 3], ["updated_at", "2015-01-04 20:45:03.094104"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.095234"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.095234"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.100133"], ["role", 4], ["updated_at", "2015-01-04 20:45:03.100133"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.101248"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.101248"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.105967"], ["role", 4], ["updated_at", "2015-01-04 20:45:03.105967"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.107458"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.107458"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.109418"], ["role", 2], ["updated_at", "2015-01-04 20:45:03.109418"], ["username", "seniorSupportTech"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.116562"], ["role", 3], ["updated_at", "2015-01-04 20:45:03.116562"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.118318"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.118318"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.124499"], ["role", 3], ["updated_at", "2015-01-04 20:45:03.124499"], ["username", "villianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.126193"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.126193"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.130986"], ["role", 3], ["updated_at", "2015-01-04 20:45:03.130986"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.132094"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.132094"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.136399"], ["role", 3], ["updated_at", "2015-01-04 20:45:03.136399"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.137425"], ["role", 4], ["updated_at", "2015-01-04 20:45:03.137425"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.138291"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.138291"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:03.143683"], ["role", 4], ["updated_at", "2015-01-04 20:45:03.143683"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:03.144743"], ["role", 1], ["updated_at", "2015-01-04 20:45:03.144743"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.447141"], ["role", 3], ["updated_at", "2015-01-04 20:45:40.447141"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.450203"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.450203"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:45:40.465342"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.465342"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:45:40.467181"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.474644"], ["role", 3], ["updated_at", "2015-01-04 20:45:40.474644"], ["username", "villianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.475838"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.475838"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:45:40.479046"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.479046"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:45:40.480484"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.485421"], ["role", 4], ["updated_at", "2015-01-04 20:45:40.485421"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.486630"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.486630"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.489765"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.489765"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.493309"], ["role", 4], ["updated_at", "2015-01-04 20:45:40.493309"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.494351"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.494351"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.495486"], ["role", 2], ["updated_at", "2015-01-04 20:45:40.495486"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:45:40.498443"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.498443"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:45:40.499748"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.504756"], ["role", 3], ["updated_at", "2015-01-04 20:45:40.504756"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.505947"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.505947"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:45:40.509833"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.509833"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:45:40.511589"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:45:40.514817"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.522116"], ["role", 3], ["updated_at", "2015-01-04 20:45:40.522116"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.523722"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.523722"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:45:40.527216"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.527216"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:45:40.528575"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:45:40.531893"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.3ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:45:40.538866"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.542370"], ["role", 3], ["updated_at", "2015-01-04 20:45:40.542370"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.543463"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.543463"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:45:40.546617"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.546617"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:45:40.547929"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.551302"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.551302"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:45:40.554467"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:45:40.556241"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:45:40.557640"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.561356"], ["role", 3], ["updated_at", "2015-01-04 20:45:40.561356"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.562626"], ["role", 4], ["updated_at", "2015-01-04 20:45:40.562626"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.563875"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.563875"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:45:40.567867"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.567867"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:45:40.569364"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.572716"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:45:40.572716"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:45:40.575923"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:45:40.577789"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:45:40.581254"], ["role", 4], ["updated_at", "2015-01-04 20:45:40.581254"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:45:40.582267"], ["role", 1], ["updated_at", "2015-01-04 20:45:40.582267"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.076431"], ["role", 3], ["updated_at", "2015-01-04 20:46:34.076431"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.079540"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.079540"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:46:34.094469"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.094469"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:46:34.096443"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.103609"], ["role", 3], ["updated_at", "2015-01-04 20:46:34.103609"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.104747"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.104747"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:46:34.107957"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.107957"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:46:34.109391"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.115023"], ["role", 4], ["updated_at", "2015-01-04 20:46:34.115023"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.116261"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.116261"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.119442"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.119442"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.122910"], ["role", 4], ["updated_at", "2015-01-04 20:46:34.122910"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.124067"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.124067"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.125128"], ["role", 2], ["updated_at", "2015-01-04 20:46:34.125128"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:46:34.128188"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.128188"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:46:34.129767"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.135498"], ["role", 3], ["updated_at", "2015-01-04 20:46:34.135498"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.136595"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.136595"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:46:34.139592"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.139592"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:46:34.140828"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:46:34.143926"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.150642"], ["role", 3], ["updated_at", "2015-01-04 20:46:34.150642"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.151892"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.151892"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:46:34.155330"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.155330"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:46:34.156640"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:46:34.159609"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:46:34.166966"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.170465"], ["role", 3], ["updated_at", "2015-01-04 20:46:34.170465"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.171590"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.171590"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:46:34.174833"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.174833"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:46:34.176152"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.179410"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.179410"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:46:34.183012"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:46:34.185144"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:46:34.186590"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.190691"], ["role", 3], ["updated_at", "2015-01-04 20:46:34.190691"], ["username", "villianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.192146"], ["role", 4], ["updated_at", "2015-01-04 20:46:34.192146"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.193564"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.193564"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:46:34.198027"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.198027"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:46:34.199409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.202693"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:46:34.202693"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:46:34.205964"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:46:34.207867"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:46:34.212324"], ["role", 4], ["updated_at", "2015-01-04 20:46:34.212324"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:46:34.213490"], ["role", 1], ["updated_at", "2015-01-04 20:46:34.213490"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.517680"], ["role", 3], ["updated_at", "2015-01-04 20:47:41.517680"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.520834"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.520834"], ["username", "juniorSupportTech"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:47:41.536639"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.536639"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:47:41.538710"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.546474"], ["role", 3], ["updated_at", "2015-01-04 20:47:41.546474"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.547658"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.547658"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:47:41.551145"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.551145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:47:41.552664"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.558144"], ["role", 4], ["updated_at", "2015-01-04 20:47:41.558144"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.559609"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.559609"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.563001"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.563001"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.566627"], ["role", 4], ["updated_at", "2015-01-04 20:47:41.566627"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.567746"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.567746"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.568831"], ["role", 2], ["updated_at", "2015-01-04 20:47:41.568831"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:47:41.571818"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.571818"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:47:41.573429"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.578344"], ["role", 3], ["updated_at", "2015-01-04 20:47:41.578344"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.579511"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.579511"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:47:41.582623"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.582623"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:47:41.583928"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:47:41.586927"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.593710"], ["role", 3], ["updated_at", "2015-01-04 20:47:41.593710"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.594899"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.594899"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:47:41.598084"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.598084"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:47:41.599358"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:47:41.602311"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 500 Internal Server Error in 3ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.606550"], ["role", 3], ["updated_at", "2015-01-04 20:47:41.606550"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.608191"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.608191"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:47:41.612203"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.612203"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:47:41.613561"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.616937"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.616937"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:47:41.620092"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
Completed 500 Internal Server Error in 3ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.623439"], ["role", 3], ["updated_at", "2015-01-04 20:47:41.623439"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.624584"], ["role", 4], ["updated_at", "2015-01-04 20:47:41.624584"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.625585"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.625585"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:47:41.628801"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.628801"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:47:41.630141"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.633485"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:47:41.633485"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:47:41.637667"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
Completed 500 Internal Server Error in 4ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:47:41.642325"], ["role", 4], ["updated_at", "2015-01-04 20:47:41.642325"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:47:41.643465"], ["role", 1], ["updated_at", "2015-01-04 20:47:41.643465"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.690284"], ["role", 3], ["updated_at", "2015-01-04 20:48:06.690284"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.693315"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.693315"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:48:06.708394"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.708394"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:48:06.710801"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.718328"], ["role", 3], ["updated_at", "2015-01-04 20:48:06.718328"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.719586"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.719586"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:48:06.722862"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.722862"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:48:06.724235"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.729917"], ["role", 4], ["updated_at", "2015-01-04 20:48:06.729917"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.731204"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.731204"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.734319"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.734319"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.737628"], ["role", 4], ["updated_at", "2015-01-04 20:48:06.737628"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.738790"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.738790"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.739830"], ["role", 2], ["updated_at", "2015-01-04 20:48:06.739830"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:48:06.742754"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.742754"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:48:06.744455"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.749709"], ["role", 3], ["updated_at", "2015-01-04 20:48:06.749709"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.750772"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.750772"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:48:06.753788"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.753788"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:48:06.755097"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:48:06.758192"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.765031"], ["role", 3], ["updated_at", "2015-01-04 20:48:06.765031"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.766141"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.766141"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:48:06.769678"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.769678"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:48:06.772645"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:48:06.782839"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:48:06.789873"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 1.9ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.793440"], ["role", 3], ["updated_at", "2015-01-04 20:48:06.793440"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.794508"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.794508"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:48:06.797659"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.797659"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:48:06.798915"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.802265"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.802265"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:48:06.805468"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:48:06.807675"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:48:06.809464"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.8ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.815040"], ["role", 3], ["updated_at", "2015-01-04 20:48:06.815040"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.816208"], ["role", 4], ["updated_at", "2015-01-04 20:48:06.816208"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.817120"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.817120"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:48:06.820537"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.820537"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:48:06.822035"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.825520"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:48:06.825520"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:48:06.828841"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:48:06.830524"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:48:06.834000"], ["role", 4], ["updated_at", "2015-01-04 20:48:06.834000"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:48:06.835035"], ["role", 1], ["updated_at", "2015-01-04 20:48:06.835035"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.462709"], ["role", 3], ["updated_at", "2015-01-04 20:49:06.462709"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.465867"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.465867"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:06.481179"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.481179"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:06.483038"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.5ms | ActiveRecord: 1.1ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.490882"], ["role", 3], ["updated_at", "2015-01-04 20:49:06.490882"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.492063"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.492063"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:06.495301"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.495301"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:06.496652"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.501635"], ["role", 4], ["updated_at", "2015-01-04 20:49:06.501635"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.502820"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.502820"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.506171"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.506171"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.509934"], ["role", 4], ["updated_at", "2015-01-04 20:49:06.509934"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.511093"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.511093"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.512200"], ["role", 2], ["updated_at", "2015-01-04 20:49:06.512200"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:49:06.515289"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.515289"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:06.516876"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.521775"], ["role", 3], ["updated_at", "2015-01-04 20:49:06.521775"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.522869"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.522869"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:06.525984"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.525984"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:06.528104"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:49:06.531232"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.538003"], ["role", 3], ["updated_at", "2015-01-04 20:49:06.538003"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.539094"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.539094"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:06.542229"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.542229"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:06.543534"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:49:06.546718"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:49:06.553498"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.557115"], ["role", 3], ["updated_at", "2015-01-04 20:49:06.557115"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.558228"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.558228"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:06.561465"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.561465"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:06.562757"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.566036"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.566036"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:49:06.570312"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:49:06.572141"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:49:06.573321"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.577064"], ["role", 3], ["updated_at", "2015-01-04 20:49:06.577064"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.578201"], ["role", 4], ["updated_at", "2015-01-04 20:49:06.578201"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.579469"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.579469"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:49:06.583696"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.583696"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:06.585229"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.588806"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:49:06.588806"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:49:06.592161"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:49:06.593901"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:06.597293"], ["role", 4], ["updated_at", "2015-01-04 20:49:06.597293"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:06.598400"], ["role", 1], ["updated_at", "2015-01-04 20:49:06.598400"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.790575"], ["role", 3], ["updated_at", "2015-01-04 20:49:16.790575"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.793729"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.793729"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:16.809159"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.809159"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:16.811727"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 1.2ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.819704"], ["role", 3], ["updated_at", "2015-01-04 20:49:16.819704"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.820827"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.820827"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:16.824096"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.824096"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:16.825352"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.830162"], ["role", 4], ["updated_at", "2015-01-04 20:49:16.830162"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.831329"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.831329"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.834471"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.834471"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.837811"], ["role", 4], ["updated_at", "2015-01-04 20:49:16.837811"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.838860"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.838860"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.839908"], ["role", 2], ["updated_at", "2015-01-04 20:49:16.839908"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:49:16.842908"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.842908"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:16.844251"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.849224"], ["role", 3], ["updated_at", "2015-01-04 20:49:16.849224"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.850615"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.850615"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:16.854014"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.854014"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:16.855279"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:49:16.858255"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.865266"], ["role", 3], ["updated_at", "2015-01-04 20:49:16.865266"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.866471"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.866471"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:16.869648"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.869648"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:16.871744"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:49:16.875101"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:49:16.882241"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.886080"], ["role", 3], ["updated_at", "2015-01-04 20:49:16.886080"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.888029"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.888029"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:49:16.891195"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.891195"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:16.892500"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.895843"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.895843"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:49:16.899021"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:49:16.900947"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:49:16.902166"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.906153"], ["role", 3], ["updated_at", "2015-01-04 20:49:16.906153"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.907228"], ["role", 4], ["updated_at", "2015-01-04 20:49:16.907228"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.909242"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.909242"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:49:16.914013"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.914013"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:49:16.915477"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.918814"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:49:16.918814"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:49:16.922076"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:49:16.923717"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:16.927138"], ["role", 4], ["updated_at", "2015-01-04 20:49:16.927138"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:16.928241"], ["role", 1], ["updated_at", "2015-01-04 20:49:16.928241"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.707791"], ["role", 3], ["updated_at", "2015-01-04 20:49:41.707791"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.711140"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.711140"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 11ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.727332"], ["role", 3], ["updated_at", "2015-01-04 20:49:41.727332"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.728538"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.728538"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.733538"], ["role", 4], ["updated_at", "2015-01-04 20:49:41.733538"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.734664"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.734664"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.739741"], ["role", 4], ["updated_at", "2015-01-04 20:49:41.739741"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.740926"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.740926"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.741934"], ["role", 2], ["updated_at", "2015-01-04 20:49:41.741934"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.746333"], ["role", 3], ["updated_at", "2015-01-04 20:49:41.746333"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.747424"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.747424"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.751797"], ["role", 3], ["updated_at", "2015-01-04 20:49:41.751797"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.752821"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.752821"], ["username", "juniorSupportTech"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.758916"], ["role", 3], ["updated_at", "2015-01-04 20:49:41.758916"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.760233"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.760233"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.764839"], ["role", 3], ["updated_at", "2015-01-04 20:49:41.764839"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.765876"], ["role", 4], ["updated_at", "2015-01-04 20:49:41.765876"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.766765"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.766765"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:49:41.772427"], ["role", 4], ["updated_at", "2015-01-04 20:49:41.772427"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:49:41.773788"], ["role", 1], ["updated_at", "2015-01-04 20:49:41.773788"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.523057"], ["role", 3], ["updated_at", "2015-01-04 20:50:34.523057"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.526174"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.526174"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:50:34.542189"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.542189"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:50:34.544121"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.551246"], ["role", 3], ["updated_at", "2015-01-04 20:50:34.551246"], ["username", "villianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.552408"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.552408"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:50:34.555568"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.555568"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:50:34.556845"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.561725"], ["role", 4], ["updated_at", "2015-01-04 20:50:34.561725"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.562965"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.562965"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.566083"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.566083"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.569371"], ["role", 4], ["updated_at", "2015-01-04 20:50:34.569371"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.570684"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.570684"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.572035"], ["role", 2], ["updated_at", "2015-01-04 20:50:34.572035"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:50:34.574988"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.574988"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:50:34.576363"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.581163"], ["role", 3], ["updated_at", "2015-01-04 20:50:34.581163"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.582466"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.582466"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:50:34.585723"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.585723"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:50:34.587077"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:50:34.590053"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.596868"], ["role", 3], ["updated_at", "2015-01-04 20:50:34.596868"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.598016"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.598016"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:50:34.601145"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.601145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:50:34.602463"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:50:34.605445"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:50:34.612896"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.616710"], ["role", 3], ["updated_at", "2015-01-04 20:50:34.616710"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.617823"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.617823"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:50:34.621053"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.621053"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:50:34.622345"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.625826"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.625826"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:50:34.628946"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:50:34.631242"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:50:34.632606"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.8ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.636781"], ["role", 3], ["updated_at", "2015-01-04 20:50:34.636781"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.638016"], ["role", 4], ["updated_at", "2015-01-04 20:50:34.638016"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.639040"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.639040"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:50:34.643221"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.643221"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:50:34.644969"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.648382"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:50:34.648382"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:50:34.651494"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:50:34.653190"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:34.656713"], ["role", 4], ["updated_at", "2015-01-04 20:50:34.656713"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:34.657748"], ["role", 1], ["updated_at", "2015-01-04 20:50:34.657748"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.440222"], ["role", 3], ["updated_at", "2015-01-04 20:50:47.440222"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.443192"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.443192"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 12ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.460625"], ["role", 3], ["updated_at", "2015-01-04 20:50:47.460625"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.461760"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.461760"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.467115"], ["role", 4], ["updated_at", "2015-01-04 20:50:47.467115"], ["username", "supervillianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.468498"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.468498"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.473875"], ["role", 4], ["updated_at", "2015-01-04 20:50:47.473875"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.474997"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.474997"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.476209"], ["role", 2], ["updated_at", "2015-01-04 20:50:47.476209"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.480777"], ["role", 3], ["updated_at", "2015-01-04 20:50:47.480777"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.481863"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.481863"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 4ms
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.492138"], ["role", 3], ["updated_at", "2015-01-04 20:50:47.492138"], ["username", "villianUser"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.496634"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.496634"], ["username", "juniorSupportTech"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.503485"], ["role", 3], ["updated_at", "2015-01-04 20:50:47.503485"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.504602"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.504602"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.509681"], ["role", 3], ["updated_at", "2015-01-04 20:50:47.509681"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.510887"], ["role", 4], ["updated_at", "2015-01-04 20:50:47.510887"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.511925"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.511925"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:50:47.517239"], ["role", 4], ["updated_at", "2015-01-04 20:50:47.517239"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:50:47.518441"], ["role", 1], ["updated_at", "2015-01-04 20:50:47.518441"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.841726"], ["role", 3], ["updated_at", "2015-01-04 20:51:02.841726"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.844724"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.844724"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:51:02.859765"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.859765"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:51:02.861773"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.868944"], ["role", 3], ["updated_at", "2015-01-04 20:51:02.868944"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.870203"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.870203"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:51:02.873345"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.873345"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:51:02.874650"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.879395"], ["role", 4], ["updated_at", "2015-01-04 20:51:02.879395"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.880625"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.880625"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.883731"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.883731"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.887054"], ["role", 4], ["updated_at", "2015-01-04 20:51:02.887054"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.888268"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.888268"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.889261"], ["role", 2], ["updated_at", "2015-01-04 20:51:02.889261"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:51:02.892234"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.892234"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:51:02.893467"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.897998"], ["role", 3], ["updated_at", "2015-01-04 20:51:02.897998"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.899682"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.899682"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:51:02.903160"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.903160"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:51:02.904493"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:51:02.907695"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.915424"], ["role", 3], ["updated_at", "2015-01-04 20:51:02.915424"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.916561"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.916561"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:51:02.919689"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.919689"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:51:02.920932"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:51:02.923970"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:51:02.930489"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.934544"], ["role", 3], ["updated_at", "2015-01-04 20:51:02.934544"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.935676"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.935676"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:51:02.938693"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.938693"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:51:02.940003"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.943714"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.943714"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:51:02.947101"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:51:02.948893"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:51:02.950043"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.953770"], ["role", 3], ["updated_at", "2015-01-04 20:51:02.953770"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.954830"], ["role", 4], ["updated_at", "2015-01-04 20:51:02.954830"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.955765"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.955765"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:51:02.959076"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.959076"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:51:02.960590"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.964594"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:51:02.964594"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:51:02.967960"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:51:02.969592"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:02.972940"], ["role", 4], ["updated_at", "2015-01-04 20:51:02.972940"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:02.974230"], ["role", 1], ["updated_at", "2015-01-04 20:51:02.974230"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.266386"], ["role", 3], ["updated_at", "2015-01-04 20:51:28.266386"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.269566"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.269566"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.275281"], ["role", 3], ["updated_at", "2015-01-04 20:51:28.275281"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.276440"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.276440"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.280045"], ["role", 4], ["updated_at", "2015-01-04 20:51:28.280045"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.281098"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.281098"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.284359"], ["role", 4], ["updated_at", "2015-01-04 20:51:28.284359"], ["username", "supervillianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.285813"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.285813"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.286922"], ["role", 2], ["updated_at", "2015-01-04 20:51:28.286922"], ["username", "seniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.290146"], ["role", 3], ["updated_at", "2015-01-04 20:51:28.290146"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.291380"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.291380"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.294473"], ["role", 3], ["updated_at", "2015-01-04 20:51:28.294473"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.295563"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.295563"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.298870"], ["role", 3], ["updated_at", "2015-01-04 20:51:28.298870"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.299968"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.299968"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.303882"], ["role", 3], ["updated_at", "2015-01-04 20:51:28.303882"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.305538"], ["role", 4], ["updated_at", "2015-01-04 20:51:28.305538"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.306580"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.306580"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
Completed 500 Internal Server Error in 0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:51:28.317355"], ["role", 4], ["updated_at", "2015-01-04 20:51:28.317355"], ["username", "supervillianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:51:28.318546"], ["role", 1], ["updated_at", "2015-01-04 20:51:28.318546"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.295149"], ["role", 3], ["updated_at", "2015-01-04 20:52:43.295149"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.298308"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.298308"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:52:43.313599"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.313599"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:52:43.315637"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.322978"], ["role", 3], ["updated_at", "2015-01-04 20:52:43.322978"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.324156"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.324156"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:52:43.327369"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.327369"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:52:43.328675"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.333620"], ["role", 4], ["updated_at", "2015-01-04 20:52:43.333620"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.334768"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.334768"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.338048"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.338048"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.341412"], ["role", 4], ["updated_at", "2015-01-04 20:52:43.341412"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.342430"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.342430"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.343465"], ["role", 2], ["updated_at", "2015-01-04 20:52:43.343465"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:52:43.346502"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.346502"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:52:43.347992"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.352962"], ["role", 3], ["updated_at", "2015-01-04 20:52:43.352962"], ["username", "villianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.354675"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.354675"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:52:43.358336"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.358336"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:52:43.359770"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:52:43.362923"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.369666"], ["role", 3], ["updated_at", "2015-01-04 20:52:43.369666"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.370768"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.370768"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:52:43.373979"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.373979"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:52:43.375228"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:52:43.378391"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:52:43.385636"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.389270"], ["role", 3], ["updated_at", "2015-01-04 20:52:43.389270"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.390343"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.390343"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:52:43.393544"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.393544"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:52:43.394841"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.398151"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.398151"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:52:43.401789"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:52:43.403584"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:52:43.404794"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.408918"], ["role", 3], ["updated_at", "2015-01-04 20:52:43.408918"], ["username", "villianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.410604"], ["role", 4], ["updated_at", "2015-01-04 20:52:43.410604"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.412332"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.412332"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:52:43.416267"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.416267"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:52:43.417576"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.420915"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:52:43.420915"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:52:43.424352"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.2ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:52:43.426435"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:52:43.430411"], ["role", 4], ["updated_at", "2015-01-04 20:52:43.430411"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:52:43.431904"], ["role", 1], ["updated_at", "2015-01-04 20:52:43.431904"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.768182"], ["role", 3], ["updated_at", "2015-01-04 20:54:32.768182"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.771685"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.771685"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:54:32.786549"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.786549"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:54:32.788468"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.795882"], ["role", 3], ["updated_at", "2015-01-04 20:54:32.795882"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.796989"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.796989"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:54:32.800312"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.800312"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:54:32.801614"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.806452"], ["role", 4], ["updated_at", "2015-01-04 20:54:32.806452"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.807680"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.807680"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.811236"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.811236"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.814847"], ["role", 4], ["updated_at", "2015-01-04 20:54:32.814847"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.816018"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.816018"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.817119"], ["role", 2], ["updated_at", "2015-01-04 20:54:32.817119"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:54:32.820603"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.820603"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:54:32.822867"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.828032"], ["role", 3], ["updated_at", "2015-01-04 20:54:32.828032"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.829135"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.829135"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:54:32.832248"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.832248"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:54:32.833533"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:54:32.836612"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.843267"], ["role", 3], ["updated_at", "2015-01-04 20:54:32.843267"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.844434"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.844434"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:54:32.847841"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.847841"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:54:32.849142"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:54:32.852140"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:54:32.859410"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.863134"], ["role", 3], ["updated_at", "2015-01-04 20:54:32.863134"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.864407"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.864407"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:54:32.867707"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.867707"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:54:32.868952"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.872152"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.872152"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:54:32.875451"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:54:32.877532"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:54:32.878883"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.882979"], ["role", 3], ["updated_at", "2015-01-04 20:54:32.882979"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.884187"], ["role", 4], ["updated_at", "2015-01-04 20:54:32.884187"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.885929"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.885929"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:54:32.889882"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.889882"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:54:32.891187"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.894707"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:54:32.894707"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:54:32.898385"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:54:32.900131"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:54:32.903513"], ["role", 4], ["updated_at", "2015-01-04 20:54:32.903513"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:54:32.905053"], ["role", 1], ["updated_at", "2015-01-04 20:54:32.905053"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.656169"], ["role", 3], ["updated_at", "2015-01-04 20:55:32.656169"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.659218"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.659218"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:32.674152"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.674152"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:32.676089"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.683263"], ["role", 3], ["updated_at", "2015-01-04 20:55:32.683263"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.684426"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.684426"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:32.687604"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.687604"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:32.688902"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.693977"], ["role", 4], ["updated_at", "2015-01-04 20:55:32.693977"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.695226"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.695226"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.698470"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.698470"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.701840"], ["role", 4], ["updated_at", "2015-01-04 20:55:32.701840"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.702967"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.702967"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.704101"], ["role", 2], ["updated_at", "2015-01-04 20:55:32.704101"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:55:32.707031"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.707031"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:32.708442"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.713871"], ["role", 3], ["updated_at", "2015-01-04 20:55:32.713871"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.715154"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.715154"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:32.718366"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.718366"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:32.719707"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:55:32.722671"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.8ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.729403"], ["role", 3], ["updated_at", "2015-01-04 20:55:32.729403"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.730504"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.730504"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:32.733632"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.733632"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:32.735148"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:55:32.738322"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:55:32.745279"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.748932"], ["role", 3], ["updated_at", "2015-01-04 20:55:32.748932"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.749986"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.749986"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:32.753112"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.753112"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:32.754357"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.757667"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.757667"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:55:32.760769"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:55:32.762563"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:55:32.763786"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.767695"], ["role", 3], ["updated_at", "2015-01-04 20:55:32.767695"], ["username", "villianUser"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.768736"], ["role", 4], ["updated_at", "2015-01-04 20:55:32.768736"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.769608"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.769608"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:55:32.773332"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.773332"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:32.775127"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.778842"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:55:32.778842"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:55:32.782315"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:55:32.783976"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:32.787356"], ["role", 4], ["updated_at", "2015-01-04 20:55:32.787356"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:32.788437"], ["role", 1], ["updated_at", "2015-01-04 20:55:32.788437"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.869469"], ["role", 3], ["updated_at", "2015-01-04 20:55:48.869469"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.872655"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.872655"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:48.887963"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.887963"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:48.889806"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.896945"], ["role", 3], ["updated_at", "2015-01-04 20:55:48.896945"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.898117"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.898117"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:48.901698"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.901698"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:48.903188"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.908230"], ["role", 4], ["updated_at", "2015-01-04 20:55:48.908230"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.909623"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.909623"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.913093"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.913093"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.916560"], ["role", 4], ["updated_at", "2015-01-04 20:55:48.916560"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.917656"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.917656"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.918687"], ["role", 2], ["updated_at", "2015-01-04 20:55:48.918687"], ["username", "seniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 3], ["created_at", "2015-01-04 20:55:48.921775"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.921775"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:48.923429"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.928267"], ["role", 3], ["updated_at", "2015-01-04 20:55:48.928267"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.929447"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.929447"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:48.932702"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.932702"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:48.933989"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"active", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 1], ["updated_at", "2015-01-04 20:55:48.937057"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.944128"], ["role", 3], ["updated_at", "2015-01-04 20:55:48.944128"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.945263"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.945263"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:48.948525"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.948525"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:48.949848"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1[0m  [["status", 2], ["updated_at", "2015-01-04 20:55:48.952938"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.2ms)[0m  SELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:55:48.959908"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35mTicket Load (0.1ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."title" = 'title' LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.963499"], ["role", 3], ["updated_at", "2015-01-04 20:55:48.963499"], ["username", "villianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.964662"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.964662"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 2], ["created_at", "2015-01-04 20:55:48.967823"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.967823"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:48.969136"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.972335"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.972335"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:55:48.975788"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 2], ["updated_at", "2015-01-04 20:55:48.977572"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "tickets" SET "assigned_id" = ?, "updated_at" = ? WHERE "tickets"."id" = 2[0m  [["assigned_id", 2], ["updated_at", "2015-01-04 20:55:48.978783"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.982554"], ["role", 3], ["updated_at", "2015-01-04 20:55:48.982554"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:48.983702"], ["role", 4], ["updated_at", "2015-01-04 20:55:48.983702"], ["username", "supervillianUser"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.985242"], ["role", 1], ["updated_at", "2015-01-04 20:55:48.985242"], ["username", "juniorSupportTech"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["assigned_id", 3], ["created_at", "2015-01-04 20:55:48.989230"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.989230"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3  [["current_ticket_id", 1], ["updated_at", "2015-01-04 20:55:48.990545"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 1]]
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"supervillianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'supervillianUser' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:48.993812"], ["description", "description"], ["submitter_id", 2], ["title", "title"], ["updated_at", "2015-01-04 20:55:48.993812"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35mTicket Load (0.0ms)[0m  SELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1  [["id", 2]]
Processing by TicketsController#update as HTML
  Parameters: {"status"=>"closed", "id"=>"1"}
  [1m[36mTicket Load (0.0ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "tickets" SET "status" = ?, "updated_at" = ? WHERE "tickets"."id" = 1  [["status", 2], ["updated_at", "2015-01-04 20:55:48.997288"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets" INNER JOIN "users" ON "users"."id" = "tickets"."submitter_id" WHERE (assigned_id is NULL and users.role in (3) )  ORDER BY "tickets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 3[0m  [["current_ticket_id", nil], ["updated_at", "2015-01-04 20:55:48.999032"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.5ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 20:55:49.002679"], ["role", 4], ["updated_at", "2015-01-04 20:55:49.002679"], ["username", "supervillianUser"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 20:55:49.003890"], ["role", 1], ["updated_at", "2015-01-04 20:55:49.003890"], ["username", "juniorSupportTech"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 21:04:03.743268"], ["role", 3], ["updated_at", "2015-01-04 21:04:03.743268"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 21:04:03.746424"], ["role", 1], ["updated_at", "2015-01-04 21:04:03.746424"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-01-04 21:04:30.512707"], ["role", 3], ["updated_at", "2015-01-04 21:04:30.512707"], ["username", "villianUser"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "role", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-01-04 21:04:30.515901"], ["role", 1], ["updated_at", "2015-01-04 21:04:30.515901"], ["username", "juniorSupportTech"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TicketsController#create as HTML
  Parameters: {"user"=>"villianUser", "title"=>"title", "description"=>"description"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'villianUser' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  WHERE (current_ticket_id is NULL and role IN (1,2))  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "tickets" ("assigned_id", "created_at", "description", "submitter_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["assigned_id", 2], ["created_at", "2015-01-04 21:04:30.531600"], ["description", "description"], ["submitter_id", 1], ["title", "title"], ["updated_at", "2015-01-04 21:04:30.531600"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "users" SET "current_ticket_id" = ?, "updated_at" = ? WHERE "users"."id" = 2[0m  [["current_ticket_id", 1], ["updated_at", "2015-01-04 21:04:30.533471"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[36mTicket Load (0.1ms)[0m  [1mSELECT  "tickets".* FROM "tickets"  WHERE "tickets"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
